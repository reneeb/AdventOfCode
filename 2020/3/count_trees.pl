#!/usr/bin/perl

use strict;
use warnings;

my @rows = <DATA>;

my $col = 0;
my $trees; 
while ( my $row = shift @rows ) {
    chomp $row;

    if ( $col >= length $row ) {
        $col -= length $row;
    }

    my $field = substr $row, $col, 1;
    $trees++ if $field eq '#';

    print $row, "\t\t";
    substr $row, $col, 1, 'X';
    print $row, "\t", ($field eq '#' ? $trees : ''), "\n";

    $col += 3;
}

print "TREES: $trees\n";



__DATA__
.#..#....##...#....#.....#.#...
........##....#..#..##....#.#..
......##......##.........#....#
...#.....#....##.......#.#....#
.#.###.#.#..#.....##..#....#.#.
##.........##.....####......#..
#...#..........#.##............
####............#..........#.#.
......#......#....##...#..##...
#..#....#...#......#......####.
......#..........#.........#.#.
...##.......#..#.#..#..#....#..
..####....#.#...............##.
...###........#.....#..........
#..#.##...##.#..##...##...#....
.###........#.##..#.#.....#....
.#.......#..##.......#......#..
.##...........#..............#.
...#..#.....#...........#...#..
.....#..............#..#.......
.......#....#.....##...........
.#...#.............#.....##....
....#.#....#...#...#..#..##.#..
...#..##..##...#..##........#.#
.###..#...#.#.#.#..#...#.......
.....##.#.##.#.#.......#..#....
.##.#...#.....#...#....#.....#.
.....#......###....###..##.#..#
.....#..##....#..#.#..#.#.#....
#....#.....#.#.......#...#....#
...#........#............#..#..
#.#...#...#..##.........#...##.
.#..#.#...........#....#...#...
##..#.#..........#.....###...#.
#..#........#.......#.#..#....#
..#...##....#..#....#....#.....
...#.....##....#...#..#....##.#
.....#......#...#.#.#.#.#......
###.....#..#.#..........##.#...
...............#..#...#.#....#.
#.....#.....###....#..........#
........#...#.#.......#..#...#.
..#.##...#...#...#.........#...
#..........#..#.#...........##.
##.......#.#.#...#.....#.......
...#.#.#.....#......#....##..#.
##.#.....#....#...#.......#....
.#......##..#.##.#....##..##.#.
..#..#......#....#...#..#.#....
...#..###...#.......#..#.......
...#....#..#....#........##....
#...#...#....#.#.........###.#.
.#.........##..##...#..........
...##.....##.........#..#..#...
###....#......#.##..#...#......
.###....#.#.......#..#....#...#
....####........##....#.#....##
..#.....#......##...#..#..#....
...#....#...#......#.###.#.#.#.
......#.......#..#...#...#.....
.#...#...#..#.#..........#.....
........#..#.........#.#....##.
.#....#.......#........#.##.#..
...#...#..#.....#......#...##..
.#.................#........###
.......#.#..#.#...#............
.#.......#..##...#.###....#.##.
#........#.###.#..#........##..
..##.#....##......##........#..
...............#...............
#.......#......##..#.#....#.#.#
..#.....#......#.#.#...#...##..
..........#........#.....##...#
#..........#.#..#..##..#......#
.......#..###..##.#..##........
#.#..##..###..#.###.....#.#..##
..#.#........#...###...##......
.......##.....##...#.##........
.#.#...###..#..#......##....##.
#...#.#.....##..#..#..#.#....#.
........#......#....#..#.......
...#.#.#.#........###....#...#.
.#......#...#.......#......#...
#...#.##.#..#.#..#.........#...
....#......##......#........#.#
..##.#.....#..#......#..#......
#.##...##...#................#.
.....#..#....#....#####........
....#..#..#.#...#.#............
.........#.#....#..#....##...#.
#....#..........#......#......#
.......#..............#......#.
.#..#...#..#.#.....#.#.#.##.#..
.##........#......#...#.##.....
...#.##..#........#...........#
..#...#..#........#.......#.#..
#.....#..#.#..#..#...#...#..#..
..................#.#.....#...#
........#...##.#..#.........#..
.#...##.#...........##.##...#..
#......#.........#...#...#...#.
..........#.............#...#..
#............##.#..#...#.#...#.
..#.##...##....##.#...####...#.
#.##..#......#.......#.#...##..
.....#...#..#......#####.##..#.
#...#.#.##..#..##.....#......#.
.#..#......#.#.#...#.#...##.#..
.#.....#..##........#.....#...#
.................#..........#..
##.#.#......#.####..#.....#....
.#...##.####..#...#............
..#...............###....#....#
#...#..###..#.#.##...........##
...................#..#.....#..
...#.##.#...#.....#......#.##..
#.#...#.........##.#........#.#
.##.......#..#..#.....##....#..
......##.#.#..#...#.#..##.....#
..#..###...#...#......#.#......
..##....#.#...#....#....#..#..#
#..##....#........#..##..#..#.#
.......#............#....##..#.
.#.#..#.........#.#.##......#..
#.#....#..##..#..###.#.....##..
.###.#......#.....#####...#....
#...#.#...##......#...#.#...##.
#..#.........#..#............#.
...##......##.......##....##...
...#...##....###..###.#...#....
#.#....#...#.#...##..#........#
.#..#..................#....#..
#......#..#...##..##...#..##..#
...#..#.....#...#........#.#.#.
#...#..##....#.....#........#..
.##..#....#.....#.#............
##..##.#.#.##.#.#..#.#..#....#.
#.......#...............#.....#
..#.....#..##.....#...##.##....
...#..#...#.#.#....#......#....
###.#.......#....#....#.#...#..
.....###..#...###.#.#..#.......
.....#.........##.#....#..##.#.
........#....#....#....#.#..##.
........###....#.#.........#.#.
.#..###..#........#.......##.#.
.#.#...........................
..#....##...#.#....#....#.#....
.#...#...##.#........###....#..
#.#....#...#.#.#...##......##..
#......#....#...#..#....#...#..
...#..##........#.#...##......#
....##...........##...#..#..#..
......#..#........#..#....##.##
.###..#.#.........#.....#......
.#..##............#......#.....
..##.#.#..#..#.###....#..#..#..
....#.#..#.#..##...##.#.#.#.#..
....#..#....#...............#..
..#...#.##.....##....#..##..#..
.......##.#....#.##....#.......
.#...#........#...#......#.###.
..#....##.......#....#.#...#.#.
.....#.....#...##..#....#.#..##
..##........##............##...
..........#...#.......#.......#
.#...............#...#.##......
#.##......#....#.##.#..#..#...#
......###.........#...#..#....#
....#......#...#....#....#...#.
#...##...#....#......####....#.
.................#......#......
..#..........##.......##..#.##.
.#.....#.......#...######..#..#
....##.#...#...#..........#....
.....#.......#...#.#.......###.
#...#.###.....#...#.......#....
.#.##.####....#.....#.#........
.......#.....##............##..
..#...#.#.##........#...##...#.
........#...####.##..#....#...#
#.......#...##.#......#..#...#.
......#.........#..###.#.#....#
#..##...#...#..#...#...#.....#.
.#...#...#.#.................##
#......#.....#..#.#..#......##.
.......#.##...#.......#.......#
.#.#..#..#......#....#.#...#.#.
..#...#.#..#......#...#.#.#....
........#..............#..##...
.##..#..##.#....#.#..###..#..#.
..#....#......#...#.#.#....#...
...#..#..#....#..#.....##......
.#......#...#........##........
.#......#..#...##..#..#.#.#....
.##......#.##.........#....#...
....#....##..#..###.#..#......#
....#....##..........#.#...#...
..##.#.............#..#.....#..
..#.....#....#....#.......##...
.##.#....#....#...#....##.#....
...#.#..#.###.#..#.#.......#.#.
.....##.....#.......#......#...
.#.....#..#.#.#..#........##...
##.....................#.......
..###............#........##..#
.#.##.....#..#..#..#.#.......#.
.##...................#..#..#..
..#.#...#..........##..#..##...
#......#..#..#.#..#......#..#.#
.#...#....#.#.........#.....#.#
#..........#.#....#....#.#.#.#.
#.....#..........#..#....#..#..
........#....#..##.#.#.......#.
.#.......##.......#..##...#....
...#..##..#......##.#..#.#..#..
.#..#.......#..##..#......#....
###.#.........#......#.#.......
...#......#....#..##..#.#..#...
......#..#.....#.........#....#
....#..#..#..#.........##.#..#.
......#..#..#..#....#...#..##.#
......##.#..#..#.#.......#.#.##
..#.....#...#..#....#..........
.##..##.....##.......#.##.#....
...#..#.......#..#.......#.....
.........#....##..#.#....#.#...
.....#..#...#.........#....#..#
.........##.....#.#...#.###...#
.#......####..##...#..#........
.#......##....#.....#..........
##.......##.#.......#..........
.#......#.#.#.#....#........#..
......##..##...#...#...........
.#...#.#..#......#.#.#.#....#.#
...#.........#.....#...###.....
#.....##....#.##...#....#......
.#..#...#..##.###.#.#.#...#....
...#......#..#....#...#...#....
.#..............#.....#........
..##...#.....#..#.....#..#.#...
.##...#....#.##...#.........##.
..#......#...##..#.....#......#
#.#..............#...#...#..#.#
..#..#.#...........#...#.#.#...
#..........#...#..#..##..#....#
............#...#........###...
.........#.....#.....#..#......
#...#.#..##......#.#####.......
...#........#..............#...
......###.#.#.....#..#....##.#.
.#.#.#..##....###.#..#....##...
.#....#.##............##.#.....
##...##.#......#.#.##.##...###.
.......#.#........#.....#......
....#.....#......#...#.#..#....
.#.........#....#...#...#...#.#
#.......#................#..#..
.##...........#.##...##....#...
#...#.#...###.........#.......#
.#...#.........................
#.......#...#.....##.##...##...
.#.#....#.......#.#.##.#....#..
#..#....#...#.#.##.#....#....#.
.##.....#.#..#...#..#..........
.............#...#.#..#........
....#........#..#......##......
#.....#....#.....#.......#.....
........#.......##....#........
.#.#..##.......................
##..#.....#........#.....#.....
.#......#.#...#.#..........#..#
.#..#.....#..#..........#.###..
......#.#..#.#.......#.#.....#.
.#....#......#..##.............
#...##.........#.#.#...#.....#.
..#................#..#..###...
#.....#....##.#..##......#.#.#.
..#....#...#...#...............
#................#....#...#.#..
................#...#.....#.##.
..#.#.#..#.##.......##.......##
...........#......##.......###.
...#.......##.........#.#.#.#..
.#...#.#..#...#.#.....#........
............#####......##......
....###....#.##...#..#.........
..#.#...#.......#...#...#.###..
..............##..#...#....#...
#.#..##...#....##.........#....
..#...#.....#...........#...#..
#.#..###..#.#..#........#..#.#.
...###...##...#...#.#.........#
..#........#.....#.#.#.......#.
...#..#..........#.....#...#...
....#..#.....#....##....#.##...
.....##..#...#.#..##...#...##.#
...........###...##....#.......
##..#.#..#..#...#....##..#..#..
##...#.#......##.#..#...#....#.
.#.......#...........#...#.....
#...#....#.......#...#.##......
.........#.......#...#.#...#...
.......##.#..................#.
........#..#.#......#.....#....
.....#.#.#.#....##...#.###.....
#.#.........#..#.#.#.#.#.......
.............#....#.......###..
.#.##....#....##.........####..
...........###.#...............
#.........##.#.#..#.....##.###.
.#.#.....#.#...#.....##...#...#
#....#...#.........#.#.......#.
.....#.###..#....#...##..#...#.
#........#....#.#..#....#.#....
#.#..##......#.........#.#.....
##..#.....#......###....#....#.
#.#.####..#.#.#......##...#..#.
....#.....#.#.#.#.....#........
..##..........#......#.#.#..#..
.#...##.##.........#.........##
..#.#.#..........#..#..#......#
###..###..#...#................
